Type: AWS::IAM::ManagedPolicy
Properties:
  ManagedPolicyName: "${opt:stage, 'dev'}-${self:service}-lambda"
  PolicyDocument:
    Version: "2012-10-17"
    Statement:
      [
        {
          "Effect": "Allow",
          "Action":
            [
              "logs:CreateLogGroup",
              "logs:CreateLogStream",
              "logs:PutLogEvents",
            ],
          "Resource": "arn:aws:logs:us-east-1*:*",
        },
        {
          "Effect": "Allow",
          "Action": ["*"],
          "Resource": "arn:aws:s3:::${self:service}-upload-data-${opt:stage, 'dev'}/*",
        },
        {
          "Effect": "Allow",
          "Action": ["*"],
          "Resource": "arn:aws:dynamodb:us-east-1:*:table/${self:service}-upload-metadata-${opt:stage, 'dev'}",
        },
      ]
#Roles:
# - Ref: IamRoleLambda
